<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mypage">

	<select id="listHistory" parameterType="listvo" 
	resultType="visitvo">
		<![CDATA[
		  SELECT * FROM (     SELECT rownum as rnum, c.* FROM 
            (SELECT 
               a.no 
              ,b.name as programName
              ,a.reg_date as regDate
              ,a.whitening_score as whiteningScore
              ,a.wrinkle_score as whinkleScore
              ,a.elastic_score as elasticScore
              ,a.moisture_score as moistureScore
              ,a.acne_score as acneScore
              ,a.average_score as averageScore
            FROM VISIT a, PROGRAM b
            WHERE a.user_no = #{userNo } AND a.program_no = b.no ORDER BY a.REG_DATE desc) c  )
        WHERE ( #{currentPage } - 1 ) * #{pageRecords } + 1 <= rnum and rnum <= #{currentPage } * #{pageRecords }
		]]>
	</select>
	
	<select id="countHistory" parameterType="java.lang.Long" 
	resultType="int">
		<![CDATA[
		SELECT count(*) FROM VISIT WHERE user_no = #{userNo }
		]]>
	</select>
	
	
</mapper>